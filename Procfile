release: python -c "import os; os.environ.setdefault('DJANGO_SETTINGS_MODULE','config.settings'); import django; django.setup(); from django.contrib.auth import get_user_model; U=get_user_model(); u,created=U.objects.get_or_create(username=os.getenv('DJANGO_SUPERUSER_USERNAME','admin'), defaults={'email':os.getenv('DJANGO_SUPERUSER_EMAIL','admin@example.com')}); u.is_staff=True; u.is_superuser=True; pwd=os.getenv('DJANGO_SUPERUSER_PASSWORD'); assert pwd, 'Missing DJANGO_SUPERUSER_PASSWORD'; u.set_password(pwd); u.save(); print(('created' if created else 'updated')+': '+u.username)" ; python manage.py migrate --noinput
web: gunicorn config.wsgi:application --bind 0.0.0.0:$PORT --workers 3 --threads 4 --timeout 120
